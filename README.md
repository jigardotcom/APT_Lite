# APT_Lite
Astropolis Processing Toolkit


INTRODUCTION
This document provides an overview of the MATLAB functions and scripts designed to analyse the behavioural data generated by the video game Astropolis.  This guide is intended to explain how to use these functions.  In addition to this document, each function comes with a separate document explaining its use, and we have endeavoured to ensure that the code itself is well-commented. The original APT was developed at Cornell University by Keith Yoder and in this attempt we removed the EEG processing part and made a lighter version that processes behavioural log and aligns the EEG log to it, if an EEG log is available.

NOTE: If EEG data need to be aligned with the behavioural log data, please make sure that EEGLAB is installed on the machine and is in the MATLAB path before launching APT_Lite. However, for processing only behavioral data (without EEG data), installation of EEGLAB is not required.

To launch APT_Lite, from the MATLAB command window, the user would type:

	>> APT_Lite
	
As in the above example, when this document demonstrates what the user should actually type, the MATLAB cursor ('>>') will appear, followed by the verbatim commands.  

If, after completely reading through the documentation, questions remain, feel free to send questions to Jigar Patel (University of Hyderabad, India) at jigardotcom@gmail.com.


				*****************************************************
	*** THE ASTROPOLIS PROCESSING TOOLKIT (APT)  Lite ***
				*****************************************************
				
The Astropolis Processing Toolkit (APT) Lite is a collection of scripts and functions designed to process the log files generated by the video game Astropolis.

***********
* THE GUI *
***********
For ease of use, a graphical user interface (GUI) is included with the APT_Lite.  To launch the GUI, use the 'APT_Lite' command in the MATLAB command window.

The GUI's window contains a dropdown menu to execute commands.

To perform actions, use the dropdown menus at the top of the GUI.

	THE FILE MENU
	The first dropdown menu on the GUI's menu bar is the FILE menu.  From this menu, users can load behavioural data of either Lab sessions (with EEG) or Laptop sessions (without EEG), can load the corresponding EEG dataset for Lab sessions, and of course can quit.

		LOAD VIDEO GAME LOG FILE
		APT_Lite prompts the user to select an ExperimentLog.txt to load.  By implementing READFILE, the ExperimentLog.txt is loaded into the environment.  

		LOAD VIDEO GAME LOG FILE (LAPTOP)
		This function is the same as LOAD VIDEO GAME LOG FILE, except that it loads Laptop Log files that do not have EEG data.

		LOAD EEG DATASET FILE
		APT_Lite prompts the user to select a .set file to load.  Using EEGLAB funtion pop_loadset, a structure containing information of EEG data is loaded into the MATLAB environment.  


		QUIT
		This closes the APT_Lite window.
		
		
	THE PROCESS MENU
	The second dropdown menu is the PROCESS menu.  This menu contains functions that process Behvioural Log data and align with EEG data (for Lab files only).
	
		PROCESS LAB DATASET
		When called, this function processes a Lab Log file. Using the PROCESS functions,EXPLOG events are translated based on the epoch definitions in AstropolisEventCodeLexicon.xls file and the specifications in Wiki. This function needs to be executed before calling 'Align and Update EEG dataset' process command. The underlying main function AST_PROCESS has been borrowed from APT. This function processes behavioural results as well but these are discarded. The result processing is now done in separate functions, namely, MD_COMPILE, MD_MOTOR_POT, SJ_COMPILE and SP_COMPILE.

		ALIGN AND UPDATE EEG DATASET
		When called, this function aligns the EEG dataset with the Behavioural Log, using a dynamic-programming approach adapted from algorithms for DNA sequence alignment. It creates .set and .fdt files with updated events generated from the PROCESS LAB DATASET menu command. This menu item needs to be invoked only after processing the Lab Log file.

	THE DATA MENU
	This third dropdown menu is the DATA menu.  This menu has an option to display the behavioural data collected from EXPLOGs.


		PROCESS & EXPORT MD RESULTS TO .CSV (EXCEPT MOTOR POTENTIAL)
		This function processes the Maritime Defender (MD) minigame (except motor potential) data and provides output in .csv file which can be used for statistical analysis.

		PROCESS & EXPORT MD MOTOR POTENTIAL RESULTS TO .CSV
This function processes the minigame Maritime Defender (MD) for motor potential data and provides output in .csv file which can be used for statistical analysis. The reason for separating this function is that the result file generated for Motor Potentials is not compatible with the file generated for other MD results. In case of other behavioral measures of MD, we estimate reaction times and accuracy after separating them into go and no-go trials. However for motor potential analysis we do not need to make any such distinction, and we are only looking for the elapsed time and the total number of movement commands issued between the appearance of a wormhole and the player shooting it to open it. Thus we thought it would be better to have a separate code for it. However the two can be merged, if required, in the future.

PROCESS & EXPORT SP RESULTS TO .CSV
This function processes the Stellar Prospector (SP) minigame data and provides output in a .csv file which can be used for statistical analysis.

PROCESS & EXPORT SJ RESULTS TO .CSV
This function processes the StarJack (SJ) minigame data and provides output in a .csv file which can be used for statistical analysis.

		
****************************
* HOW TO ANALYSE A SUBJECT *
****************************
The following steps lay out the most common way to use the GUI to extract all of the relevant data from a subject's data file.

1. Launch the APT_Lite

	To launch the APT_Lite, simply type the following into the MATLAB command window:
			>> APT_Lite
			
2. Load the ExperimentLog.txt from the in-lab recording

	In the APT window, go to File > Load video game log file

	Ensure that the subject's in-lab ExperimentLog.txt is selected and click OK.
	The progress of loading and completion is printed in the MATLAB command window.
		
3. Load the ExperimentLog.txt from the laptop

	In the APT window, go to File > Load video game log file (laptop)

	Ensure that the subject's laptop ExperimentLog.txt is selected and click OK.
	The progress of loading and completion is printed in the MATLAB command window.

4. Load the EEG Dataset file (.set file of the subject)

	In the APT window, go to File > Load EEG Dataset
	
	Ensure that the subject's EEG Dataset file (SubjectNum.set) is selected and click OK.
	The progress of loading is printed in the MATLAB command window.

5. Process Lab Dataset

	In the APT window, go to Process > Process Lab Dataset
		
	The progress of processing and completion is printed in the MATLAB command window.

6. Align and Update EEG Dataset

	In the APT window, go to Process > Align and Update EEG Dataset
	
User will be prompted to export the stats to a .csv file
	
The progress of processing and completion is printed in the MATLAB command window. Once finished, user will be prompted to save new EEG dataset, so provide the file name and location.

7. To process behavioural MD minigame data and export the results to a .csv file,
		
In the APT window, go to Data > Process & Export MD Results to .csv (Except Motor Potential)

User will be prompted to export the results to a .csv file

8. To process behavioural MD minigame data for Motor Potentials and export the results to a .csv file,
		
In the APT window, go to Data > Process & Export MD Motor Potential Results to .csv

User will be prompted to export the results to a .csv file

9. To process behavioural SP minigame data and export the results to a .csv file,

	In the APT window, go to Data > Process & Export SP Results to .csv

User will be prompted to export the results to a .csv file

10. To process behavioural SJ minigame data and export the results to a .csv file,

	In the APT window, go to Data > Process & Export SJ Results to .csv

	User will be prompted to export the results to a .csv file
